## Node

> Using fnm to use .node-version

- npm
- node -v 20.14.0

## Image

Using supabase storage

> Image Rule #1

1. ì´ë¯¸ì§€ë¥¼ ë²„í‚· /tmp/{{v4()}} ì— ì €ìž¥í•œ ë’¤ pathë¥¼ return -> ì´ë¯¸ì§€ê°€ ë“¤ì–´ìžˆì§€ ì•Šì€ ê¸€ì„ ìž‘ì„±í•œ ë’¤ treasure_idë¥¼ return -> ì´ë¯¸ì§€ë¥¼ ë²„í‚· /treasure/{{treasure_id}}ë¡œ ì˜®ê¸´ í›„ ê¸€ì˜ ì´ë¯¸ì§€ë¥¼ ì´ pathë¡œ ìˆ˜ì •

-> ì´ë°©ì‹ì€ ì²˜ìŒì— 2ë²ˆì§¸ ê³¼ì •ì¸ ì´ë¯¸ì§€ê°€ ë“¤ì–´ìžˆì§€ ì•Šì€ ê¸€ì„ ìž‘ì„±í–ˆì„ ë•Œ ìœ ì €ê°€ ì¡°íšŒí•  ìˆ˜ ìžˆëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸°ë•Œë¬¸ì— ìœ„í—˜

2. ê¸€ì„ ìž‘ì„±í•œë’¤ treasure_idë¥¼ return -> ì´ë¯¸ì§€ë¥¼ ë²„í‚· /treasure/{{treasure_id}}ì— ì €ìž¥í•œ ë’¤ pathë¥¼ return -> ê¸€ì˜ ì´ë¯¸ì§€ë¥¼ ì´ pathë¡œ ìˆ˜ì •

-> ì´ ë°©ì‹ì€ 1ë²ˆ ë°©ì‹ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì´ë¯¸ì§€ê°€ ë“¤ì–´ìžˆì§€ ì•Šì€ ê¸€ì„ ìž‘ì„±í–ˆì„ ë•Œ ìœ ì €ê°€ ì¡°íšŒí•  ìˆ˜ ìžˆëŠ” ë¬¸ì œê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ìœ„í—˜í•˜ë‹¤. ì´ ì „ ê³¼ì •ì„ transactionì„ í†µí•´ ë¬´ê²°ì„±ì„ ë³´ìž¥í•´ì„œ í•´ê²°í•  ìˆ˜ ìžˆìŒ. supabaseì—ì„œ transactionì„ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— rpcë¡œ ì§ì ‘ SQL ì¿¼ë¦¬ë¥¼ í˜¸ì¶œí•´ì„œ transaction ê³¼ì •ì„ ì§„í–‰í•´ì•¼ í•¨.

3. ì´ë¯¸ì§€ë¥¼ ë²„í‚· /treasure/{{v4()}} ì— ì €ìž¥í•œ ë’¤ pathë¥¼ return -> ê¸€ì„ ì¶”ê°€í• ë•Œ ì´ pathë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì‚¬ìš©

-> ì´ ë°©ì‹ì€ ê³¼ì •ì´ ì œì¼ ë‹¨ìˆœí•˜ê³  ë³µìž¡ë„ê°€ ë‚®ìœ¼ë‚˜ /treasure ë°‘ìœ¼ë¡œ ì´ë¯¸ì§€ê°€ êµ‰ìž¥ížˆ ë§Žì´ ìŒ“ì´ê²Œ ë˜ì–´ì„œ ê´€ë¦¬í•˜ê¸° ì–´ë ¤ìš´ êµ¬ì¡°.

### ì¼ë‹¨ 3ë²ˆìœ¼ë¡œ ì§„í–‰...ðŸ¥¹ DB í…Œì´ë¸” ì„¤ê³„ê°€ í™•ì‹¤í•˜ê²Œ ë˜ë©´ 2ë²ˆìœ¼ë¡œ ë°”ê¿€ ì˜ˆì •

> Image Rule #2

1. image pathëŠ” ë’¤ì— ì¿¼ë¦¬ë¡œ ?updatedAt={{timeStamp}}ê°€ ë“¤ì–´ê°

-> Nextì—ì„œ í•´ë‹¹ ì´ë¯¸ì§€ urlì— ëŒ€í•œ ì´ë¯¸ì§€ íŒŒì¼ì„ ìºì‹±í•˜ê¸° ë•Œë¬¸ì—, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ê²½ë¡œë¥¼ ë°”ê¿”ì„œ pathì˜ ê²½ë¡œë¥¼ ë‹¤ë¥´ê²Œ í•˜ì—¬ ìˆ˜ì •ëœ ì´ë¯¸ì§€ì˜ ë³€í™”ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•¨.

> Image Policy

- Max Size: 20mb
- Size <= 5mb: [HTTP protocol](https://supabase.com/docs/guides/storage/uploads/standard-uploads)
- Size > 5mb: [TUS protocol](https://supabase.com/docs/guides/storage/uploads/resumable-uploads)

## Etc

moo!
